(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{4559:(e,t,s)=>{"use strict";s.d(t,{T:()=>a});let a=s(9509).env.BACKEND_URL||"https://zootopia.webprvw.link/api"},4644:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var a=s(5155),i=s(4559),o=s(2115),l=s(7383),n=s(3464),r=s(3568),d=s(5695);let c=()=>{let e=(0,d.useRouter)(),[t,s]=(0,o.useState)({email:"",otp:"",step:"email",isLoading:!1}),c=async e=>{if(e.preventDefault(),t.email){s(e=>({...e,isLoading:!0}));try{let e="".concat(i.T,"/auth/send-otp");(await n.A.post(e,{email:t.email})).data&&s(e=>({...e,step:"otp",isLoading:!1}))}catch(e){console.error("Failed to send OTP",e),r.Ay.error("Failed to send verification code."),s(e=>({...e,isLoading:!1}))}}},m=async a=>{if(a.preventDefault(),t.otp){s(e=>({...e,isLoading:!0}));try{let s="".concat(i.T,"/auth/verify-otp"),a=await n.A.post(s,{email:t.email,otp:t.otp});a.data&&(l.A.set("auth_token",a.data.token),l.A.set("refresh_token",a.data.refresh),r.Ay.success("Login successful!"),e.push("/dashboard"))}catch(e){console.error("Failed to verify OTP",e),r.Ay.error("Invalid verification code. Please try again."),s(e=>({...e,isLoading:!1,otp:""}))}}};return(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center md:bg-[#F5F5F5] w-full",children:(0,a.jsxs)("div",{className:"w-full max-w-sm rounded-xl  p-8 bg-white ",children:[(0,a.jsx)("h1",{className:"sm:text-xl text-2xl font-normal text-center text-gray-700",children:"Zootopia Animal Wellness Center"}),"email"===t.step&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h2",{className:"text-[18px] font-bold",children:"Sign in"}),(0,a.jsx)("p",{className:"mt-2 text-[13px] text-gray-600",children:"Enter your email and we'll send you a verification code"})]}),(0,a.jsxs)("form",{onSubmit:c,className:"mt-3 space-y-5",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{id:"email",type:"email",required:!0,value:t.email,onChange:e=>s(t=>({...t,email:e.target.value})),className:"peer w-full rounded-md border border-gray-300 px-2 py-2 text-sm text-gray-900 focus:border-blue-500 ",placeholder:"Email",disabled:t.isLoading})}),(0,a.jsx)("button",{type:"submit",disabled:t.isLoading||!t.email,className:"w-full rounded-md bg-[#005BD3] py-3 px-3 font-semibold text-white text-sm transition hover:bg-[#0045A3] focus:outline-none focus:ring-2  focus:ring-offset-2 disabled:cursor-not-allowed ",children:t.isLoading?"Sending...":"Continue"})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-start gap-4 text-sm",children:[(0,a.jsx)("a",{href:"https://www.zootopia.com.ph/89981845806/policies/40314372398.html?locale=en",className:"font-medium text-[#005BD3]  hover:underline",children:"Privacy policy"}),(0,a.jsx)("a",{href:"https://www.zootopia.com.ph/89981845806/policies/42022076718.html?locale=en",className:"font-medium text-[#005BD3]  hover:underline",children:"Terms of service"})]})]}),"otp"===t.step&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Enter code"}),(0,a.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Sent to"," ",(0,a.jsx)("strong",{className:"font-medium text-gray-800",children:t.email}),"."]})]}),(0,a.jsxs)("form",{onSubmit:m,className:"mt-3 space-y-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)("input",{id:"otp",type:"text",required:!0,maxLength:6,value:t.otp,onChange:e=>s(t=>({...t,otp:e.target.value.replace(/\D/g,"")})),className:"w-full rounded-md border border-gray-300 px-2 py-2  text-md tracking-widest text-gray-900 focus:border-blue-500 focus:ring-blue-500",placeholder:"6-digit code",disabled:t.isLoading})}),(0,a.jsx)("button",{type:"submit",disabled:t.isLoading||6!==t.otp.length,className:"w-full rounded-md bg-[#005BD3] py-3 px- font-semibold text-sm text-white transition hover:bg-[#0045A3] focus:outline-none focus:ring-2  focus:ring-offset-2 disabled:cursor-not-allowed ",children:t.isLoading?"Verifying...":"Verify"}),(0,a.jsx)("button",{type:"button",onClick:()=>{s(e=>({...e,step:"email",otp:""}))},className:"w-full py-2  text-sm font-medium text-[#005BD3]  cursor-pointer hover:underline text-left",children:"Sign in with a different email"})]}),(0,a.jsxs)("div",{className:"mt-1 flex justify-start gap-4 text-sm",children:[(0,a.jsx)("a",{href:"https://www.zootopia.com.ph/89981845806/policies/40314372398.html?locale=en",className:"font-medium text-[#005BD3]  hover:underline",children:"Privacy policy"}),(0,a.jsx)("a",{href:"https://www.zootopia.com.ph/89981845806/policies/42022076718.html?locale=en",className:"font-medium text-[#005BD3]  hover:underline",children:"Terms of service"})]})]})]})})}},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},7457:(e,t,s)=>{Promise.resolve().then(s.bind(s,4644))}},e=>{e.O(0,[122,568,441,964,358],()=>e(e.s=7457)),_N_E=e.O()}]);