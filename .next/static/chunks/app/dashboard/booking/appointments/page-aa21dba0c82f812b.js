(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[376],{1154:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2274:(e,t,a)=>{"use strict";a.d(t,{G:()=>r,j:()=>s});var n=a(4540);let s=n.wA,r=n.d4},3052:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(9946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},4559:(e,t,a)=>{"use strict";a.d(t,{T:()=>n});let n=a(9509).env.BACKEND_URL||"https://zootopia.webprvw.link/api"},5169:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7196:(e,t,a)=>{Promise.resolve().then(a.bind(a,8194))},7340:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(9946).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},8084:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var n=a(3464),s=a(7383),r=a(4559);let i=n.A.create({baseURL:r.T});i.interceptors.request.use(e=>{let t=s.A.get("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,async e=>{var t;let a=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!a._retry){a._retry=!0;try{let e=s.A.get("refresh_token");if(!e)throw Error("Missing refresh token");let t=(await n.A.post("".concat(r.T,"/auth/refresh"),{refresh_token:e})).data.token;return s.A.set("auth_token",t),a.headers.Authorization="Bearer ".concat(t),i(a)}catch(e){return console.error("Refresh token failed:",e),s.A.remove("auth_token"),s.A.remove("refresh_token"),window.location.href="/login",Promise.reject(e)}}return Promise.reject(e)});let l=i},8194:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var n=a(5155),s=a(2115),r=a(3052),i=a(5169),l=a(7340),d=a(1154),o=a(6874),c=a.n(o),p=a(2274),m=a(8275);let u=e=>{let{reservation:t}=e,a={booked:{text:"Confirm",color:"bg-[#0066C3]/10 text-[#0066C3]"},draft:{text:"Pending",color:"bg-[#FD5E2D]/10 text-[#FD5E2D]"}},s=a[t.status]||a.draft;return(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsxs)("div",{className:"mb-2 rounded-lg border border-gray-300 bg-white p-3 text-gray-700",children:[new Date(t.date).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})," ",t.timeSlot," ",t.time]}),(0,n.jsxs)("div",{className:"mt-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between py-2 mb-4",children:[(0,n.jsx)("span",{className:"rounded px-3 py-1 text-sm font-semibold ".concat(s.color),children:s.text}),(0,n.jsxs)(c(),{href:"/dashboard/booking/appointments/".concat(t.id),className:"flex items-center text-sm text-gray-500 hover:text-gray-700",children:["View details",(0,n.jsx)(r.A,{className:"ml-1 h-4 w-4"})]})]}),t.pets.map(e=>(0,n.jsxs)("div",{className:"rounded-b-lg bg-primary/10 p-4",children:[(0,n.jsxs)("div",{className:"flex justify-between py-2",children:[(0,n.jsx)("p",{className:"text-[#222222]",children:"Pet Name"}),(0,n.jsx)("p",{className:"font-medium text-[#0066C3]",children:e.selectedPet.name})]}),(0,n.jsxs)("div",{className:"flex justify-between py-2",children:[(0,n.jsx)("p",{className:"text-[#222222]",children:"Purpose of visit"}),(0,n.jsx)("p",{className:"font-medium text-[#0066C3]",children:e.purposeOfVisit})]})]}))]})]})};function h(){let e=(0,p.j)(),{appointments:t,loading:a,error:r}=(0,p.G)(e=>e.appointment);return(0,s.useEffect)(()=>{e((0,m.Ns)())},[e]),(0,n.jsxs)("div",{className:"min-h-screen bg-white font-sans pb-20",children:[(0,n.jsxs)("div",{className:"bg-white fixed top-0 px-4 w-full sm:max-w-3xl py-4 flex items-center justify-between border-[#E7E7E7] border z-10",children:[(0,n.jsx)(c(),{href:"/dashboard",children:(0,n.jsx)(i.A,{className:"w-6 h-6"})}),(0,n.jsx)("h1",{className:"text-[20px] font-medium text-[#1B1B1C]",children:"Pet Reservations"}),(0,n.jsx)(c(),{href:"/dashboard",children:(0,n.jsx)(l.A,{className:"w-6 h-6"})})]}),(0,n.jsxs)("main",{className:"p-4 mt-20",children:[(0,n.jsx)("h2",{className:"mb-8 text-2xl font-bold text-gray-900",children:"Pet Reservation information"}),a&&(0,n.jsx)("div",{className:"flex justify-center items-center py-10 min-h-[50vh]",children:(0,n.jsx)(d.A,{className:"h-8 w-8 animate-spin text-cyan-500"})}),r&&(0,n.jsx)("div",{className:"text-center py-10 text-red-500",children:(0,n.jsxs)("p",{children:["Error fetching appointments: ",r]})}),!a&&!r&&(0,n.jsx)(n.Fragment,{children:t.length>0?t.map((e,t)=>(0,n.jsx)(u,{reservation:e},t)):(0,n.jsx)("p",{className:"text-center py-10 text-gray-500",children:"No reservations found."})})]}),(0,n.jsx)("footer",{className:"fixed md:max-w-3xl md:relative w-full bottom-0 bg-white p-4",children:(0,n.jsx)(c(),{href:"/dashboard/new-appointment",children:(0,n.jsx)("button",{className:"w-full rounded-lg bg-cyan-400 py-3 text-lg font-semibold text-white shadow-md hover:bg-cyan-500 focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:ring-opacity-75",children:"New Appointment"})})})]})}},8275:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>p,Ns:()=>i,cD:()=>l,d3:()=>c,gG:()=>d});var n=a(1990),s=a(8084);let r=e=>{var t,a,n;return{id:String(e.id),status:e.status,date:e.date.split("T")[0],time:e.time,timeSlot:e.time_slot,numberOfPets:e.number_of_pets,pets:e.pets.map(e=>{var t,a,n,s,r,i;return{selectedPet:{id:String(e.id),name:e.name,type:e.type,gender:null!=(t=e.gender)?t:"",age:null!=(a=e.age)?a:"",weight:null!=(n=e.weight)?n:"",is_neutered:null!=(s=e.is_neutered)&&s},purposeOfVisit:null!=(r=e.purposeOfVisit)?r:"",memo:null!=(i=e.memo)?i:""}}),memberInfo:{firstName:null!=(t=e.member_first_name)?t:"",lastName:null!=(a=e.member_last_name)?a:"",phoneNumber:null!=(n=e.member_phone)?n:""},agreedToPolicy:e.agreed_to_policy}},i=(0,n.zD)("appointments/fetchAppointments",async(e,t)=>{try{return(await s.A.get("/appointments")).data.map(e=>r(e))}catch(e){return t.rejectWithValue(e.message)}}),l=(0,n.zD)("appointments/fetchAppointmentById",async(e,t)=>{try{let t=await s.A.get("/appointments/".concat(e));return r(t.data)}catch(e){return t.rejectWithValue(e.message)}}),d=(0,n.zD)("appointments/createAppointment",async(e,t)=>{try{let t=await s.A.post("/appointments",e);return r(t.data)}catch(e){return t.rejectWithValue(e.message)}}),o=(0,n.zD)("appointments/updateAppointment",async(e,t)=>{try{let{id:t,...a}=e,n=await s.A.put("/appointments/".concat(t),a);return r(n.data)}catch(e){return t.rejectWithValue(e.message)}}),c=(0,n.zD)("appointments/deleteAppointment",async(e,t)=>{try{return await s.A.delete("/appointments/".concat(e)),e}catch(e){return t.rejectWithValue(e.message)}}),p=(0,n.Z0)({name:"appointment",initialState:{loading:!1,error:null,appointments:[],selectedAppointment:null},reducers:{},extraReducers:e=>{e.addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.loading=!1,e.appointments=t.payload}).addCase(i.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.loading=!1,e.selectedAppointment=t.payload;let a=e.appointments.findIndex(e=>e.id===t.payload.id);-1!==a&&(e.appointments[a]=t.payload)}).addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.appointments.push(t.payload)}).addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(o.pending,e=>{e.loading=!0,e.error=null}).addCase(o.fulfilled,(e,t)=>{e.loading=!1,e.selectedAppointment=t.payload;let a=e.appointments.findIndex(e=>e.id===t.payload.id);-1!==a&&(e.appointments[a]=t.payload)}).addCase(o.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(c.pending,e=>{e.loading=!0,e.error=null}).addCase(c.fulfilled,(e,t)=>{var a;e.loading=!1,e.appointments=e.appointments.filter(e=>e.id!==t.payload),(null==(a=e.selectedAppointment)?void 0:a.id)===t.payload&&(e.selectedAppointment=null)}).addCase(c.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}).reducer}},e=>{e.O(0,[122,540,990,95,441,964,358],()=>e(e.s=7196)),_N_E=e.O()}]);