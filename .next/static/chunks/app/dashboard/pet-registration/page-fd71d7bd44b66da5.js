(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[207],{1154:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2274:(e,t,r)=>{"use strict";r.d(t,{G:()=>l,j:()=>a});var s=r(4540);let a=s.wA,l=s.d4},4355:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},4416:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4559:(e,t,r)=>{"use strict";r.d(t,{T:()=>s});let s=r(9509).env.BACKEND_URL||"https://zootopia.webprvw.link/api"},4616:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5560:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var s=r(5155),a=r(6874),l=r.n(a);function d(e){let{title:t}=e;return(0,s.jsxs)("div",{className:"bg-white fixed top-0 px-4 w-full sm:max-w-3xl py-4 flex items-center justify-between  border-[#E7E7E7] border z-10",children:[(0,s.jsx)(l(),{href:"/dashboard",children:(0,s.jsx)("svg",{width:"18",height:"17",viewBox:"0 0 18 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.5 1.35355C7.69526 1.15829 8.01184 1.15829 8.20711 1.35355C8.40237 1.54882 8.40237 1.8654 8.20711 2.06066L1.91421 8.35355H16.7071C16.9832 8.35355 17.2071 8.57741 17.2071 8.85355C17.2071 9.1297 16.9833 9.35355 16.7071 9.35355H1.91421L8.20711 15.6464C8.40237 15.8417 8.40237 16.1583 8.20711 16.3536C8.01184 16.5488 7.69526 16.5488 7.5 16.3536L0.707107 9.56066C0.316582 9.17014 0.316583 8.53697 0.707107 8.14645L7.5 1.35355Z",fill:"#1B1B1C",stroke:"black","stroke-width":"0.5"})})}),(0,s.jsx)("h1",{className:"text-[20px] font-medium text-[#1B1B1C]",children:t}),(0,s.jsx)("div",{})]})}r(2115)},7283:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>i,F2:()=>l,Hp:()=>d});var s=r(8084),a=r(1990);let l=(0,a.zD)("pet/registerPet",async(e,t)=>{try{return(await s.A.post("/pet",e)).data}catch(e){var r,a;return t.rejectWithValue((null==e||null==(a=e.response)||null==(r=a.data)?void 0:r.message)||"Failed to register pet")}}),d=(0,a.zD)("pet/fetchPets",async(e,t)=>{try{return(await s.A.get("/pet")).data}catch(e){var r,a;return t.rejectWithValue((null==e||null==(a=e.response)||null==(r=a.data)?void 0:r.message)||"Failed to fetch pets")}}),i=(0,a.Z0)({name:"pet",initialState:{pets:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.loading=!1,e.pets.push(t.payload)}).addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"Failed to register pet"}).addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.pets=t.payload}).addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"Failed to fetch pets"})}}).reducer},8084:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(3464),a=r(7383),l=r(4559);let d=s.A.create({baseURL:l.T});d.interceptors.request.use(e=>{let t=a.A.get("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),d.interceptors.response.use(e=>e,async e=>{var t;let r=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!r._retry){r._retry=!0;try{let e=a.A.get("refresh_token");if(!e)throw Error("Missing refresh token");let t=(await s.A.post("".concat(l.T,"/auth/refresh"),{refresh_token:e})).data.token;return a.A.set("auth_token",t),r.headers.Authorization="Bearer ".concat(t),d(r)}catch(e){return console.error("Refresh token failed:",e),a.A.remove("auth_token"),a.A.remove("refresh_token"),window.location.href="/login",Promise.reject(e)}}return Promise.reject(e)});let i=d},8940:(e,t,r)=>{"use strict";r.d(t,{default:()=>p});var s=r(5155),a=r(2115),l=r(4616);let d=(0,r(9946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);var i=r(1154),n=r(4416),c=r(4355),o=r(5560),m=r(2274),u=r(7283),x=r(3568),h=r(8084);let p=()=>{let{loading:e}=(0,m.G)(e=>e.pet),t=(0,m.j)(),[r,p]=(0,a.useState)("Dog"),[b,g]=(0,a.useState)(""),[y,j]=(0,a.useState)("Male"),[f,N]=(0,a.useState)(!1),[v,w]=(0,a.useState)(""),[C,k]=(0,a.useState)(""),[A,S]=(0,a.useState)(!1),[L,M]=(0,a.useState)(null),[_,B]=(0,a.useState)(!1),[D,F]=(0,a.useState)(!1),[E,P]=(0,a.useState)(""),[R,z]=(0,a.useState)({}),O=(0,a.useRef)(null),[q,H]=(0,a.useState)([]),[Y,T]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{T(!0);try{let e=await h.A.get("/admin/breeds");H(e.data.data)}catch(e){console.error("Failed to fetch breeds:",e),x.Ay.error("Could not load breeds.")}finally{T(!1)}})()},[]);let U=(0,a.useMemo)(()=>{let e=q.filter(e=>e.type===r);return E.trim()?e.filter(e=>e.name.toLowerCase().includes(E.toLowerCase())):e},[E,q,r]),Z=()=>!!(b.trim()&&v.trim()&&C.trim()&&L),G=async e=>{if(e.preventDefault(),!(()=>{let e={};return(b.trim()||(e.petName="Pet name is required"),L)?(v.trim()||(e.breed="Breed selection is required"),C.trim()||(e.birthday="Birthday is required"),z(e),0===Object.keys(e).length):(x.Ay.error("Please add an image!"),!1)})())return;let s=await t((0,u.F2)({type:r,name:b,gender:y,is_neutered:f,breed:v,birthday:C,image:L}));u.F2.fulfilled.match(s)?S(!0):x.Ay.error(s.payload||"Registration failed.")},V=()=>{window.location.href="/dashboard",S(!1)},W=()=>B(!0),K=(e,t)=>{R[e]&&z(t=>({...t,[e]:""})),"petName"===e?g(t):"birthday"===e&&k(t)};return(0,s.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,s.jsx)(o.A,{title:"Register Pet"}),(0,s.jsx)("div",{className:"px-4 py-6 pt-20",children:(0,s.jsxs)("form",{onSubmit:G,children:[(0,s.jsx)("div",{className:"flex justify-center mb-8",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"h-40 w-40 rounded-full flex items-center justify-center overflow-hidden cursor-pointer",onClick:W,children:L?(0,s.jsx)("img",{src:L,alt:"Selected pet",className:"h-full w-full object-cover"}):(0,s.jsx)("img",{src:"/pet-res.png",alt:"Dog and cat illustration",className:"h-full w-full"})}),(0,s.jsx)("button",{type:"button",className:"absolute bottom-0 right-0 bg-white rounded-full p-2 shadow-md border border-gray-100",onClick:W,children:(0,s.jsx)(l.A,{className:"h-6 w-6 text-gray-500"})})]})}),(0,s.jsx)("input",{type:"file",ref:O,onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(r){let e=new FileReader;e.onload=e=>{var t;"string"==typeof(null==(t=e.target)?void 0:t.result)&&(M(e.target.result),B(!1))},e.readAsDataURL(r)}},accept:"image/*",className:"hidden"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("label",{className:"block text-sm mb-2",children:["Type ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2",children:[(0,s.jsx)("button",{type:"button",className:"py-4 px-4 border rounded-l-lg text-lg ".concat("Dog"===r?"border-primary bg-primary/10 text-primary":"border-gray-300"),onClick:()=>{p("Dog"),w("")},children:"Dog"}),(0,s.jsx)("button",{type:"button",className:"py-4 px-4 border rounded-r-lg text-lg ".concat("Cat"===r?"border-primary bg-primary/10 text-primary":"border-gray-300"),onClick:()=>{p("Cat"),w("")},children:"Cat"})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("label",{className:"block text-sm mb-2",children:["Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",placeholder:"Please Enter 8 Characters Or Less",className:"w-full p-3 border rounded-lg ".concat(R.petName?"border-red-500":"border-gray-300"),value:b,onChange:e=>K("petName",e.target.value)}),R.petName&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:R.petName})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("label",{className:"block text-sm mb-2",children:["Gender ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2",children:[(0,s.jsx)("button",{type:"button",className:"py-4 px-4 border rounded-l-lg text-lg ".concat("Male"===y?"border-primary bg-primary/10 text-primary":"border-gray-300"),onClick:()=>j("Male"),children:"Male"}),(0,s.jsx)("button",{type:"button",className:"py-4 px-4 border rounded-r-lg text-lg ".concat("Female"===y?"border-primary bg-primary/10 text-primary":"border-gray-300"),onClick:()=>j("Female"),children:"Female"})]})]}),(0,s.jsxs)("div",{className:"mb-6 flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"neutered",checked:f,onChange:()=>N(!f),className:"h-4 w-4 rounded border-gray-300"}),(0,s.jsx)("label",{htmlFor:"neutered",className:"ml-2 text-sm",children:"Neutered Or Not"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("label",{className:"block text-sm mb-2",children:["Breed ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"Select a breed",className:"w-full p-3 border rounded-lg cursor-pointer ".concat(R.breed?"border-red-500":"border-gray-300"),value:v,onClick:()=>{F(!0),P("")},readOnly:!0}),(0,s.jsx)("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,s.jsx)(d,{className:"h-6 w-6 text-gray-400"})})]}),R.breed&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:R.breed})]}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("label",{className:"block text-sm mb-2",children:["Birthday ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",placeholder:"MM-DD-YYYY",className:"w-full p-3 border rounded-lg ".concat(R.birthday?"border-red-500":"border-gray-300"),value:C,onChange:e=>{K("birthday",(e=>{let t=e.replace(/\D/g,""),r=t.slice(0,2);return t.length>2&&(r+="-"+t.slice(2,4)),t.length>4&&(r+="-"+t.slice(4,8)),r})(e.target.value))},maxLength:10}),R.birthday&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:R.birthday})]}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)("button",{type:"submit",className:"w-full py-4 rounded-lg text-lg font-medium shadow-md ".concat(Z()?"bg-primary text-white":"bg-gray-300 text-white cursor-not-allowed"),disabled:!Z()||e,children:e?(0,s.jsx)(i.A,{className:"animate-spin mx-auto"}):"Register Pet"})})]})}),D&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-end justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-t-2xl w-full max-h-[80vh] flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-100",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Choosing a pet breed"}),(0,s.jsx)("button",{onClick:()=>F(!1),children:(0,s.jsx)(n.A,{})})]}),(0,s.jsxs)("div",{className:"p-4 relative",children:[(0,s.jsx)("svg",{className:"absolute left-8 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M13.2745 13.2743C13.4911 13.0577 13.4911 12.7065 13.2745 12.4898L10.1925 9.40782C11.0949 8.30407 11.5386 6.89567 11.4318 5.47393C11.325 4.0522 10.6758 2.72592 9.61854 1.76941C8.56127 0.812901 7.1768 0.299353 5.75151 0.33499C4.32621 0.370627 2.96914 0.952721 1.96099 1.96087C0.952843 2.96902 0.370749 4.32609 0.335112 5.75139C0.299475 7.17668 0.813023 8.56115 1.76953 9.61842C2.72604 10.6757 4.05232 11.3249 5.47406 11.4317C6.89579 11.5385 8.30419 11.0948 9.40794 10.1923L12.4899 13.2743C12.7066 13.491 13.0578 13.491 13.2745 13.2743ZM5.89929 10.3377C5.02143 10.3377 4.16329 10.0774 3.43338 9.58967C2.70346 9.10195 2.13457 8.40875 1.79863 7.59772C1.46268 6.78668 1.37479 5.89424 1.54605 5.03325C1.71731 4.17226 2.14004 3.38139 2.76078 2.76066C3.38152 2.13992 4.17239 1.71719 5.03338 1.54593C5.89436 1.37467 6.7868 1.46256 7.59784 1.7985C8.40887 2.13445 9.10208 2.70334 9.58979 3.43325C10.0775 4.16317 10.3378 5.02131 10.3378 5.89917C10.3365 7.07593 9.86844 8.20412 9.03634 9.03622C8.20424 9.86832 7.07605 10.3364 5.89929 10.3377Z",fill:"#8E8E93"})}),(0,s.jsx)("input",{type:"text",placeholder:"Search Here",className:"w-full pl-10 pr-4 py-4 bg-gray-100 rounded-lg border-none outline-none text-gray-700",value:E,onChange:e=>P(e.target.value),autoFocus:!0})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto px-4 pb-4",children:Y?(0,s.jsx)(i.A,{className:"animate-spin mx-auto mt-8"}):U.length>0?(0,s.jsx)("div",{className:"space-y-2",children:U.map(e=>(0,s.jsx)("button",{onClick:()=>{w(e.name),F(!1),P(""),R.breed&&z(e=>({...e,breed:""}))},className:"w-full text-left py-3 px-2 hover:bg-gray-100 rounded-lg",children:e.name},e.id))}):(0,s.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No breeds found."})})]})}),_&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-sm w-full mx-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-xl font-medium",children:"Select Profile Image"}),(0,s.jsx)("button",{onClick:()=>B(!1),children:(0,s.jsx)(n.A,{className:"h-6 w-6 text-gray-500"})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("button",{onClick:()=>{var e;return null==(e=O.current)?void 0:e.click()},className:"w-full flex items-center justify-center space-x-2 py-3 px-4 border border-gray-200 rounded-lg",children:[(0,s.jsx)(c.A,{className:"h-5 w-5 text-[#46D3E0]"}),(0,s.jsx)("span",{children:"Upload from device"})]}),L&&(0,s.jsxs)("button",{onClick:()=>{M(null),B(!1)},className:"w-full flex items-center justify-center space-x-2 py-3 px-4 border border-gray-200 rounded-lg text-red-500",children:[(0,s.jsx)(n.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"Remove current image"})]}),(0,s.jsx)("button",{onClick:()=>B(!1),className:"w-full py-3 px-4 bg-gray-100 rounded-lg text-gray-700",children:"Cancel"})]})]})}),A&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-sm w-full mx-4",children:[(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:V,children:(0,s.jsx)(n.A,{className:"h-6 w-6 text-gray-500"})})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mb-4 flex justify-center",children:(0,s.jsx)("div",{className:"w-20 h-20 bg-primary rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"h-10 w-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,s.jsx)("h3",{className:"text-xl font-medium mb-2",children:"Registration Successful!"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"Your pet has been successfully registered."}),(0,s.jsx)("button",{onClick:V,className:"w-full bg-primary text-white py-3 rounded-lg font-medium",children:"OK"})]})]})})]})}},9835:(e,t,r)=>{Promise.resolve().then(r.bind(r,8940))}},e=>{e.O(0,[122,540,990,95,568,441,964,358],()=>e(e.s=9835)),_N_E=e.O()}]);