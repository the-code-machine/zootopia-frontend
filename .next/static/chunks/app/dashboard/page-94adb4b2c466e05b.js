(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{2274:(e,t,a)=>{"use strict";a.d(t,{G:()=>i,j:()=>s});var r=a(4540);let s=r.wA,i=r.d4},3052:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},4559:(e,t,a)=>{"use strict";a.d(t,{T:()=>r});let r=a(9509).env.BACKEND_URL||"https://zootopia.webprvw.link/api"},7283:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>n,F2:()=>i,Hp:()=>l});var r=a(8084),s=a(1990);let i=(0,s.zD)("pet/registerPet",async(e,t)=>{try{return(await r.A.post("/pet",e)).data}catch(e){var a,s;return t.rejectWithValue((null==e||null==(s=e.response)||null==(a=s.data)?void 0:a.message)||"Failed to register pet")}}),l=(0,s.zD)("pet/fetchPets",async(e,t)=>{try{return(await r.A.get("/pet")).data}catch(e){var a,s;return t.rejectWithValue((null==e||null==(s=e.response)||null==(a=s.data)?void 0:a.message)||"Failed to fetch pets")}}),n=(0,s.Z0)({name:"pet",initialState:{pets:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.loading=!1,e.pets.push(t.payload)}).addCase(i.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"Failed to register pet"}).addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.loading=!1,e.pets=t.payload}).addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"Failed to fetch pets"})}}).reducer},8084:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(3464),s=a(7383),i=a(4559);let l=r.A.create({baseURL:i.T});l.interceptors.request.use(e=>{let t=s.A.get("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>{var t;let a=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!a._retry){a._retry=!0;try{let e=s.A.get("refresh_token");if(!e)throw Error("Missing refresh token");let t=(await r.A.post("".concat(i.T,"/auth/refresh"),{refresh_token:e})).data.token;return s.A.set("auth_token",t),a.headers.Authorization="Bearer ".concat(t),l(a)}catch(e){return console.error("Refresh token failed:",e),s.A.remove("auth_token"),s.A.remove("refresh_token"),window.location.href="/login",Promise.reject(e)}}return Promise.reject(e)});let n=l},8141:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>o,ZA:()=>l,d6:()=>n,p:()=>s});let r=(0,a(1990).Z0)({name:"user",initialState:{profile:null},reducers:{setUserProfile:(e,t)=>{e.profile=t.payload},clearUserProfile:e=>{e.profile=null},updateUserEmail:(e,t)=>{e.profile&&(e.profile.email=t.payload)},updateUserPhone:(e,t)=>{e.profile&&(e.profile.phone=t.payload)}}}),{setUserProfile:s,clearUserProfile:i,updateUserEmail:l,updateUserPhone:n}=r.actions,o=r.reducer},8767:(e,t,a)=>{"use strict";a.d(t,{default:()=>j});var r=a(5155),s=a(2115),i=a(9946);let l=(0,i.A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),n=(0,i.A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),o=(0,i.A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),d=(0,i.A)("stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]),c=(0,i.A)("book-minus",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M9 10h6",key:"9gxzsh"}]]);var h=a(4616),p=a(6874),m=a.n(p),u=a(2274),x=a(8141),g=a(8084),f=a(7283),y=a(8269);let v=()=>{let e=(0,u.j)(),t=(0,u.G)(e=>e.user.profile),[a,i]=(0,s.useState)([]),[d,c]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(async()=>{try{let t=await g.A.get("/auth/profile");e((0,f.Hp)());let a=await t.data.profile;e((0,x.p)(a))}catch(e){console.error("Failed to fetch user profile:",e)}})()},[e]),(0,s.useEffect)(()=>{let e=async()=>{try{c(!0);let e=await g.A.get("/upcoming-events/".concat(null==t?void 0:t.id));i(e.data)}catch(e){console.error("Failed to fetch upcoming events:",e)}finally{c(!1)}};(null==t?void 0:t.id)&&e()},[null==t?void 0:t.id]),d)?(0,r.jsxs)("div",{className:"px-4 mt-6",children:[(0,r.jsx)("h2",{className:"font-medium text-gray-900 mb-3",children:"Upcoming Events"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Loading events..."})]}):(0,r.jsxs)("div",{className:"px-4 mt-6",children:[(0,r.jsx)("h2",{className:"font-medium text-gray-900 mb-3",children:"Upcoming Events"}),a.length>0?(0,r.jsx)("div",{className:"flex space-y-3 min-h-96 flex-col overflow-y-auto pb-2 scrollbar-hide",children:a.map(e=>(0,r.jsx)(m(),{href:(null==e?void 0:e.event_type)==="appointment"?"/dashboard/booking/appointments/".concat(e.appointment_id):"/dashboard/booking/vaccine-details/".concat(null==e?void 0:e.vaccine_record_id),className:"flex-shrink-0 w-full p-4 bg-white rounded-xl border border-gray-100 shadow-sm",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 mt-1",children:(e=>{switch(e){case"appointment":return(0,r.jsx)(l,{className:"w-6 h-6 text-blue-500"});case"vaccine":return(0,r.jsx)(n,{className:"w-6 h-6 text-orange-500"});default:return(0,r.jsx)(o,{className:"w-6 h-6 text-purple-500"})}})(e.event_type)}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-800 text-sm leading-tight",children:e.title}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.description}),(0,r.jsxs)("div",{className:"mt-3 text-xs font-medium text-gray-700",children:[(0,r.jsx)("span",{children:new Date(e.event_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),e.event_time&&(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsx)("span",{className:"mx-1",children:"â€¢"}),(0,r.jsx)("span",{children:(e=>{let[t,a]=e.split(":"),r=new Date;return r.setHours(parseInt(t,10)),r.setMinutes(parseInt(a,10)),r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})})(e.event_time)})]})]})]})]})},e.id))}):(0,r.jsx)("p",{className:"text-sm text-gray-500 bg-gray-50 p-4 rounded-lg",children:"No upcoming events scheduled."})]})},j=e=>{let[t,a]=(0,s.useState)("1"),i=(0,u.G)(e=>e.user.profile),o=(0,u.j)(),{pets:p}=(0,u.G)(e=>e.pet);(0,s.useEffect)(()=>{(async()=>{try{let e=await g.A.get("/auth/profile");o((0,f.Hp)());let t=await e.data.profile;o((0,x.p)(t))}catch(e){console.error("Failed to fetch user profile:",e)}})()},[o]);let j=[{id:"1",title:"New Appointment",icon:(0,r.jsx)(l,{size:24}),color:"bg-[#3CD3E1]/10 text-[#3CD3E1]",route:"/dashboard/new-appointment"},{id:"2",title:"Add Medical Record",icon:(0,r.jsx)(d,{size:24}),color:"bg-[#3CD3E1]/10 text-[#3CD3E1]",route:"/dashboard/medical-record"},{id:"3",title:"Add Vaccine Record",icon:(0,r.jsx)(n,{size:24}),color:"bg-[#3CD3E1]/10 text-[#3CD3E1]",route:"/dashboard/vaccine-registration"},{id:"4",title:"View Bookings",icon:(0,r.jsx)(c,{size:24}),color:"bg-[#3CD3E1]/10 text-[#3CD3E1]",route:"/dashboard/booking"}];return(0,r.jsx)("div",{className:"flex flex-col min-h-screen ",children:(0,r.jsxs)("main",{className:"flex-1 pb-20",children:[(0,r.jsxs)("div",{className:"px-4 pt-6 pb-2",children:[(0,r.jsxs)("h1",{className:"text-xl font-medium text-gray-900",children:[(()=>{let e=new Date().getHours();return e<12?"Good Morning":e<18?"Good Afternoon":"Good Evening"})(),","," ",(null==i?void 0:i.firstName)||(null==i?void 0:i.email.split("@")[0]),"!"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Today is"," ",new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})]})]}),(0,r.jsxs)("div",{className:"px-4 py-3",children:[(0,r.jsx)("h2",{className:"font-medium text-gray-900 mb-2",children:"Your Pets"}),(0,r.jsxs)("div",{className:"flex space-x-3 overflow-x-auto pb-1 scrollbar-hide",children:[p.map(e=>(0,r.jsx)("div",{onClick:()=>a(e.id),className:"flex-shrink-0 w-64 p-4 rounded-xl cursor-pointer transition-all ".concat(t===e.id?"bg-[#3CD3E1]/10 border-2 border-[#3CD3E1] shadow-sm":"bg-gray-50 border border-gray-200"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("img",{src:e.image,alt:e.name,className:"w-14 h-14 rounded-full object-cover  ".concat(t===e.id?"border-[#3CD3E1]":"border-gray-300")}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 truncate",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 truncate",children:e.breed})]})]})},e.id)),(0,r.jsxs)(m(),{href:"/dashboard/pet-registration",className:"flex-shrink-0 w-64 h-auto p-4 bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl cursor-pointer flex flex-col items-center justify-center",children:[(0,r.jsx)(h.A,{size:24,className:"text-[#3CD3E1] mb-2"}),(0,r.jsx)("span",{className:"text-xs text-gray-500 text-center",children:"Add Pet"})]})]})]}),(0,r.jsxs)("div",{className:"px-4 mt-4",children:[(0,r.jsx)("h2",{className:"font-medium text-gray-900 mb-3",children:"Quick Actions"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-3",children:j.map(e=>(0,r.jsxs)(m(),{href:e.route,className:"p-4 bg-white rounded-xl border border-gray-100 shadow-sm cursor-pointer hover:shadow-md transition-shadow",children:[(0,r.jsx)("div",{className:"w-12 h-12 ".concat(e.color," rounded-xl flex items-center justify-center mb-3"),children:e.icon}),(0,r.jsx)("h3",{className:"font-medium text-gray-900 text-sm",children:e.title})]},e.id))})]}),(0,r.jsx)(v,{}),(0,r.jsx)(y.A,{})]})})}},9702:(e,t,a)=>{Promise.resolve().then(a.bind(a,8767))}},e=>{e.O(0,[122,540,990,95,269,441,964,358],()=>e(e.s=9702)),_N_E=e.O()}]);