"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[151],{985:(e,t,a)=>{a.d(t,{Ay:()=>c,ic:()=>d,nO:()=>l});var r=a(1990),n=a(8084);let l=(0,r.zD)("vaccines/fetchVaccines",async(e,t)=>{try{return(await n.A.get("/vaccines")).data.map(e=>(e=>({id:e.id,petId:e.pet_id,vaccineType:e.vaccine_type,vaccineName:e.vaccine_name,vaccinationDate:e.vaccination_date,numberOfVaccinations:e.number_of_vaccinations,dueDate:e.vaccination_date,veterinarian:e.veterinarian,notes:e.notes,images:e.images||[]}))(e))}catch(e){var a,r;return t.rejectWithValue((null==(r=e.response)||null==(a=r.data)?void 0:a.error)||e.message)}}),d=(0,r.zD)("vaccines/createVaccine",async(e,t)=>{try{return(await n.A.post("/vaccines",e)).data}catch(e){var a,r;return t.rejectWithValue((null==(r=e.response)||null==(a=r.data)?void 0:a.error)||e.message)}}),s=(0,r.zD)("vaccines/updateVaccine",async(e,t)=>{try{let{id:t,...a}=e;return(await n.A.put("/vaccines/".concat(t),a)).data}catch(e){var a,r;return t.rejectWithValue((null==(r=e.response)||null==(a=r.data)?void 0:a.error)||e.message)}}),i=(0,r.zD)("vaccines/deleteVaccine",async(e,t)=>{try{return await n.A.delete("/vaccines/".concat(e)),e}catch(e){var a,r;return t.rejectWithValue((null==(r=e.response)||null==(a=r.data)?void 0:a.error)||e.message)}}),c=(0,r.Z0)({name:"vaccine",initialState:{loading:!1,error:null,vaccines:[]},reducers:{},extraReducers:e=>{e.addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.loading=!1,e.vaccines=t.payload}).addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.vaccines.push(t.payload)}).addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(s.pending,e=>{e.loading=!0,e.error=null}).addCase(s.fulfilled,(e,t)=>{e.loading=!1;let a=e.vaccines.findIndex(e=>e.id===t.payload.id);-1!==a&&(e.vaccines[a]=t.payload)}).addCase(s.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.loading=!1,e.vaccines=e.vaccines.filter(e=>e.id!==t.payload)}).addCase(i.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}).reducer},1154:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2274:(e,t,a)=>{a.d(t,{G:()=>l,j:()=>n});var r=a(4540);let n=r.wA,l=r.d4},2355:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(9946).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},3052:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(9946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},3485:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(5155),n=a(2115),l=a(2355),d=a(3052);let s=e=>{let{onDateSelect:t}=e,[a,s]=(0,n.useState)(new Date),[i,c]=(0,n.useState)(null),o=new Date;return o.setHours(0,0,0,0),a.getFullYear()===o.getFullYear()&&(a.getMonth(),o.getMonth()),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex space-x-4 items-center  border-b py-4 bg-white border-[#E7E7E7] justify-center",children:[(0,r.jsx)("button",{onClick:()=>{let e=new Date(a);e.setMonth(e.getMonth()-1),s(e)},className:"disabled:opacity-30 disabled:cursor-not-allowed",children:(0,r.jsx)(l.A,{className:"text-[#46D3E0]"})}),(0,r.jsx)("span",{className:"font-medium text-lg",children:a.toLocaleDateString("en-US",{year:"numeric",month:"long"})}),(0,r.jsx)("button",{onClick:()=>{let e=new Date(a);e.setMonth(e.getMonth()+1),s(e)},children:(0,r.jsx)(d.A,{className:"text-[#46D3E0]"})})]}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-1 text-center px-4 pt-4 text-xs bg-white font-medium text-[#BEC2CC]",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e,t)=>(0,r.jsx)("div",{className:"py-1",children:e},t))}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-0.5 px-4 shadow-lg bg-white rounded-b-4xl mb-4 pb-3",children:(()=>{let e=a.getFullYear(),t=a.getMonth(),r=new Date(e,t,1).getDay(),n=new Date(e,t+1,0).getDate(),l=[];for(let e=0;e<r;e++)l.push({day:null,current:!1});for(let e=1;e<=n;e++)l.push({day:e,current:!0});return l})().map((e,n)=>(0,r.jsx)("div",{className:"relative text-center py-2",children:e.day?(0,r.jsxs)("button",{onClick:()=>(e=>{let r=new Date(a.getFullYear(),a.getMonth(),e);c(r),t(r)})(e.day),className:"w-8 h-8 flex flex-col items-center justify-center rounded-full mx-auto \n                  ".concat((e=>!!e&&!!i&&e===i.getDate()&&i.getMonth()===a.getMonth()&&i.getFullYear()===a.getFullYear())(e.day)&&"bg-[#46D3E0]/15 text-[#46D3E0]","\n                "),children:[e.day,(e=>{if(!e)return!1;let t=new Date;return e===t.getDate()&&a.getMonth()===t.getMonth()&&a.getFullYear()===t.getFullYear()})(e.day)&&(0,r.jsx)("div",{className:"w-1 h-1 rounded-full bg-[#46D3E0] mx-auto "})]}):(0,r.jsx)("div",{className:"w-8 h-8"})},n))})]})}},4183:(e,t,a)=>{a.d(t,{Ay:()=>c,sK:()=>l});var r=a(1990),n=a(8084);let l=(0,r.zD)("vaccineHistory/fetchHistory",async(e,t)=>{try{let t=await n.A.get("/vaccines/".concat(e,"/history"));return{vaccineId:e,data:t.data.map(e=>(e=>({id:e.id,vaccineId:e.vaccine_id,petId:e.pet_id,treatmentInfo:e.treatment_info,dateAdministered:e.date_administered,photos:e.photos||[]}))(e))}}catch(e){var a,r;return t.rejectWithValue((null==(r=e.response)||null==(a=r.data)?void 0:a.error)||e.message)}}),d=(0,r.zD)("vaccineHistory/createHistory",async(e,t)=>{try{let{vaccineId:t,...a}=e;return(await n.A.post("/vaccines/".concat(t,"/history"),a)).data}catch(e){var a,r;return t.rejectWithValue((null==(r=e.response)||null==(a=r.data)?void 0:a.error)||e.message)}}),s=(0,r.zD)("vaccineHistory/updateHistory",async(e,t)=>{try{let{id:t,vaccineId:a,...r}=e;return(await n.A.put("/vaccines/".concat(a,"/history/").concat(t),r)).data}catch(e){var a,r;return t.rejectWithValue((null==(r=e.response)||null==(a=r.data)?void 0:a.error)||e.message)}}),i=(0,r.zD)("vaccineHistory/deleteHistory",async(e,t)=>{let{vaccineId:a,historyId:r}=e;try{return await n.A.delete("/vaccines/".concat(a,"/history/").concat(r)),{vaccineId:a,historyId:r}}catch(e){var l,d;return t.rejectWithValue((null==(d=e.response)||null==(l=d.data)?void 0:l.error)||e.message)}}),c=(0,r.Z0)({name:"vaccineHistory",initialState:{loading:!1,error:null,histories:{}},reducers:{},extraReducers:e=>{e.addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.loading=!1,e.histories[t.payload.vaccineId]=t.payload.data}).addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(d.fulfilled,(e,t)=>{let{vaccineId:a}=t.payload;e.histories[a]||(e.histories[a]=[]),e.histories[a].push(t.payload)}).addCase(s.fulfilled,(e,t)=>{let{vaccineId:a,id:r}=t.payload,n=e.histories[a];if(n){let e=n.findIndex(e=>e.id===r);-1!==e&&(n[e]=t.payload)}}).addCase(i.fulfilled,(e,t)=>{let{vaccineId:a,historyId:r}=t.payload,n=e.histories[a];n&&(e.histories[a]=n.filter(e=>e.id!==r))}).addMatcher(e=>[d.pending,s.pending,i.pending].includes(e.type),e=>{e.loading=!0,e.error=null}).addMatcher(e=>[d.rejected,s.rejected,i.rejected,d.fulfilled,s.fulfilled,i.fulfilled].includes(e.type),(e,t)=>{e.loading=!1,t.type.endsWith("rejected")&&(e.error=t.payload)})}}).reducer},4559:(e,t,a)=>{a.d(t,{T:()=>r});let r=a(9509).env.BACKEND_URL||"https://zootopia.webprvw.link/api"},6474:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(9946).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},7863:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(9946).A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},8084:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(3464),n=a(7383),l=a(4559);let d=r.A.create({baseURL:l.T});d.interceptors.request.use(e=>{let t=n.A.get("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),d.interceptors.response.use(e=>e,async e=>{var t;let a=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!a._retry){a._retry=!0;try{let e=n.A.get("refresh_token");if(!e)throw Error("Missing refresh token");let t=(await r.A.post("".concat(l.T,"/auth/refresh"),{refresh_token:e})).data.token;return n.A.set("auth_token",t),a.headers.Authorization="Bearer ".concat(t),d(a)}catch(e){return console.error("Refresh token failed:",e),n.A.remove("auth_token"),n.A.remove("refresh_token"),window.location.href="/login",Promise.reject(e)}}return Promise.reject(e)});let s=d},8933:(e,t,a)=>{a.d(t,{A:()=>d});var r=a(5155),n=a(2115),l=a(2274);function d(e){let{selectedPet:t,setSelectedPet:a}=e,{pets:d}=(0,l.G)(e=>e.pet),s=[{id:"all",name:"All",type:null},...d.map(e=>({...e,imageUrl:e.image}))],[i,c]=(0,n.useState)(!1);(0,n.useEffect)(()=>{function e(e){i&&e.target instanceof HTMLElement&&!e.target.closest(".pet-dropdown")&&c(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[i]);let o=e=>{let{pet:t,size:a="w-8 h-8"}=e;return"all"===t.id?(0,r.jsx)("div",{className:"flex items-center -space-x-3 ".concat(a),children:d.slice(0,2).map((e,t)=>(0,r.jsx)("img",{src:e.image||"https://placehold.co/100x100/E2E8F0/A0AEC0?text=".concat(e.name.charAt(0)),alt:e.name,className:"w-full h-full rounded-full object-cover border-2 border-white",style:{zIndex:d.length-t}},e.id))}):(0,r.jsx)("img",{src:t.imageUrl||"https://placehold.co/100x100/E2E8F0/A0AEC0?text=".concat(t.name.charAt(0)),alt:t.name,className:"".concat(a," rounded-full object-cover")})};return(0,r.jsx)("div",{className:"px-4 py-2 pet-dropdown",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"w-full flex justify-between rect-pet items-center cursor-pointer p-2",onClick:()=>{c(e=>!e)},children:[(0,r.jsxs)("div",{className:"flex space-x-4 items-center",children:[(0,r.jsx)(o,{pet:t,size:"w-6 h-6"}),(0,r.jsx)("span",{className:"font-medium",children:t.name})]}),(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.3335L8.06323 10.6668L4 5.3335L12 5.3335Z",fill:"#1B1B1C"})})]}),i&&(0,r.jsx)("div",{className:"absolute z-[50] w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",children:s.map(e=>(0,r.jsxs)("div",{className:"flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>{a(e),c(!1)},children:[(0,r.jsx)("div",{className:"mr-5",children:(0,r.jsx)(o,{pet:e})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.name}),e.type&&(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.type})]})]},e.id))})]})})}}}]);